{% extends 'base.html.twig' %}

{% block title %}Mon profil{% endblock %}

{# {% block h1 %}Bonjour, {{ users.pseudo }}{% endblock %} #}

{% block body %}

    {% for notification in app.flashes('success') %}

    <div class="col-md-6 mx-auto alert alert-success text-center">
    {{ notification }}
    </div>

    {% endfor %}

    <div class="d-flex table-responsive">
    <table class="table table-striped table-hover text-center mt-3 mx-5 m-auto">
        <thead class="bg-dark text-white">
        <thead>
            <tr>
                <th>Pseudo</th>
                <th>Email</th>
                <th>Adresse</th>
                <th>CP</th>
                <th>Informations</th>
                <th>Avatar</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ users.pseudo|upper }}</td>
                <td>{{ users.email }}</td>
                <td>{{ users.adress }}</td>
                <td>{{ users.zip }}</td>
                <td class='fst-italic infos-profil'>{{ users.info }}</td>

                <td>
                    {% if users.avatar %}
                        <img src="{{ asset('img/avatarUpload/' ~ users.avatar) }}" alt="" class="img80">
                    {% else %}
                        <img src="{{ asset('img/imageDefault.png') }}" alt="" class="img80">
                    {% endif %}
                </td>
                <td>
                    <a href="{{ path('app_profil_delete', {'id': users.id}) }}" onclick="return confirm('Souhaitez vous vraiment supprimer votre compte ?')"><i class="fa-solid fa-trash text-danger"></i></a>
                </td>
            </tr>
        </tbody>
    </table>
    </div>
    <div class="d-flex my-4 justify-content-between">
    <a href="{{ path('app_profil_edit', {'id': users.id}) }}"><button type="submit" class="btn btn-success ms-5">Modifier</button></a>

    <form method="post" action="{{ path('app_profil_delete', {'id': users.id}) }}" onsubmit="return confirm('Are you sure you want to delete this item?');">
        <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ users.id) }}">
        <button class="btn btn-danger me-5">Delete</button>
    </form>
    </div>

{% endblock %}
